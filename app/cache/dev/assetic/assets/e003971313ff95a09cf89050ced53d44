/*!
	Kwicks for jQuery Minified
	Copyright (c) 2008 Jeremy Martin
	http://www.jeremymartin.name/projects.php?project=kwicks
	
	Licensed under the MIT license:
	http://www.opensource.org/licenses/mit-license.php

	Any and all use of this script must be accompanied by this copyright/license notice in its present form.

	5/21/2012: version 2.1.3
*/
(function(a){a.kwicks=function(e,d){var f,b=this;b.$el=a(e).addClass("kwicks");b.el=e;b.$el.data("kwicks",b);b.init=function(){var c,g;b.options=f=a.extend({},a.kwicks.defaultOptions,d);b.$kwicks=b.$el.children().addClass("kwick-panel");b.$el.addClass(f.isVertical?"vertical":"horizontal");b.size=b.$kwicks.size();f.defaultKwick=parseInt(f.defaultKwick,10);f.defaultKwick>b.size-1&&(f.defaultKwick=b.size-1);f.showNext=parseInt(f.showNext,10);b.playing=!1;b.lastActive=f.sticky?f.defaultKwick:-1;b.active=b.lastActive;b.$active=b.$kwicks.eq(b.active);b.WoH=f.isVertical?"height":"width";b.LoT=f.isVertical?"top":"left";b.normWoH=parseInt(b.$kwicks.eq(0).css(b.WoH),10);b.preCalcLoTs=[];b.aniObj={};f.max?f.min=(b.normWoH*b.size-f.max)/(b.size-1):f.max=b.normWoH*b.size-f.min*(b.size-1);f.isVertical?b.$el.css({width:b.$kwicks.eq(0).css("width"),height:b.normWoH*b.size+f.spacing*(b.size-1)}):b.$el.css({width:b.normWoH*b.size+f.spacing*(b.size-1),height:b.$kwicks.eq(0).css("height")});for(c=0;c<b.size;c++){b.preCalcLoTs[c]=[];for(g=1;g<b.size-1;g++){b.preCalcLoTs[c][g]=c===g?g*f.min+g*f.spacing:(g<=c?g*f.min:(g-1)*f.min+f.max)+g*f.spacing}}b.$el.bind("mouseenter.kwicksShow",function(){b.playing&&b.pause(true)}).bind("mouseleave.kwicksShow",function(){b.playing&&b.play()});b.$kwicks.each(function(h){var i=a(this);a.data(this,"index",h);i.addClass("kwick"+(h+1));h===0?i.css(b.LoT,0):h===b.size-1?i.css(f.isVertical?"bottom":"right",0):f.sticky?i.css(b.LoT,Math.ceil(b.preCalcLoTs[f.defaultKwick][h])):i.css(b.LoT,Math.ceil(h*b.normWoH+h*f.spacing));if(f.sticky){if(f.defaultKwick===h){i.css(b.WoH,f.max);i.addClass(f.activeClass)}else{i.css(b.WoH,f.min)}}}).css({margin:0,position:"absolute"}).bind(f.event+".kwicks",function(){var h=a.data(this,"index");b.openKwick(h)}).bind(f.eventClose+".kwicks",function(){var h=(new Date).getTime();if(!(h-b.lastEvent<200&&f.event===f.eventClose)){b.lastEvent=h;a(this).hasClass(f.activeClass)&&b.closeKwick()}});b.triggerEvent("initialized")};b.openKwick=function(t,s,r){if(/\d/.test(t)&&!isNaN(t)){var q,c,p,o=[],k=[],n=parseInt(a.trim(t),10),t=b.$kwicks.eq(n);if(0>n||n>b.size-1||t.hasClass(f.activeClass)){"function"===typeof r&&r(b)}else{b.lastEvent=(new Date).getTime();b.$kwicks.stop().removeClass(f.activeClass);b.lastActive=b.active;b.$active=t;b.active=a.data(t[0],"index");t.addClass(f.activeClass);!0!==s&&b.pause();b.triggerEvent("init");for(s=0;s<b.size;s++){o[s]=parseInt(b.$kwicks.eq(s).css(b.WoH),10),k[s]=parseInt(b.$kwicks.eq(s).css(b.LoT),10)}b.aniObj[b.WoH]=f.max;q=f.max-o[n];c=o[n]/q;b.triggerEvent("expanding");t.animate(b.aniObj,{step:function(g){p=0!==q?g/q-c:1;b.$kwicks.each(function(h){h!==n&&b.$kwicks.eq(h).css(b.WoH,Math.ceil(o[h]-(o[h]-f.min)*p));0<h&&h<b.size-1&&b.$kwicks.eq(h).css(b.LoT,Math.ceil(k[h]-(k[h]-b.preCalcLoTs[n][h])*p))})},duration:f.duration,easing:f.easing,complete:function(){b.triggerEvent("completed");"function"===typeof r&&r(b)}})}}else{"function"===typeof r&&r(b)}};b.closeKwick=function(c,o){if(!f.sticky){o||b.pause();b.triggerEvent("init");var n,m,l,k=[],j=[];for(n=0;n<b.size;n++){k[n]=parseInt(b.$kwicks.eq(n).css(b.WoH),10),j[n]=parseInt(b.$kwicks.eq(n).css(b.LoT),10)}b.aniObj[b.WoH]=b.normWoH;m=b.normWoH-k[0];b.triggerEvent("collapsing");b.$kwicks.stop().removeClass(f.activeClass).eq(0).animate(b.aniObj,{step:function(g){l=0!==m?(g-k[0])/m:1;for(n=1;n<b.size;n++){b.$kwicks.eq(n).css(b.WoH,Math.ceil(k[n]-(k[n]-b.normWoH)*l)),n<b.size-1&&b.$kwicks.eq(n).css(b.LoT,Math.ceil(j[n]-(j[n]-(n*b.normWoH+n*f.spacing))*l))}},duration:f.duration,easing:f.easing,complete:function(){b.triggerEvent("completed")}})}};b.play=function(c,g){g||b.pause();b.playing||(b.triggerEvent("playing"),b.playing=!0);c="undefined"===typeof c?-1<b.active?b.active:0:c;if(0===f.showNext){for(c=b.active;c===b.active;){c=Math.round(Math.random()*(b.size-1))}b.openKwick(c,!0)}else{b[0>c||c>=b.size?"closeKwick":"openKwick"](c,!0),c=c>=b.size?-1:0>c?b.size:c,c+=f.showNext}b.timer=setTimeout(function(){b.play(c,true)},f.showDuration)};b.pause=function(c){clearTimeout(b.timer);b.playing=c||!1;(b.playing||c)&&b.triggerEvent("paused")};b.triggerEvent=function(c){b.$el.trigger("kwicks-"+c,b);if(a.isFunction(f[c])){f[c](b)}};b.isActive=function(){return b.$kwicks.hasClass(f.activeClass)};b.getActive=function(){return b.isActive()?b.active:-1};b.init()};a.kwicks.defaultOptions={max:null,min:null,spacing:0,isVertical:!1,sticky:!1,defaultKwick:0,activeClass:"active",event:"mouseenter",eventClose:"mouseleave",duration:500,easing:"swing",showDuration:2000,showNext:1};a.fn.getkwicks=function(){return this.data("kwicks")};a.fn.kwicks=function(c,b){return this.each(function(){var e,d=a(this).data("kwicks");"object"===typeof c&&!d?new a.kwicks(this,c):d&&("string"===typeof c&&(e=c.toLowerCase(),e.match("play")?d.play():e.match("pause")&&(d.playing&&d.triggerEvent("paused"),d.pause())),(e=/\d/.test(c)&&!isNaN(c))&&0>c?d.closeKwick():e&&d.openKwick(c,!1,b))})}})(jQuery);