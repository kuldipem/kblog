(function(o,m,l,q){var p={transition:"cubeV",fallback3d:"sliceV",controls:"thumbs",thumbMargin:3,autoPlay:false,delay:5000,transitionDuration:800,startSlide:0,keyNav:true,captionWidth:50,arrowTemplate:'<div class="rs-arrows"><a href="#" class="rs-prev"></a><a href="#" class="rs-next"></a></div>',onInit:function(){},onChange:function(){},afterChange:function(){}};function k(a,b){this.$slider=o(a).addClass("rs-slider");this.settings=o.extend({},p,b);this.$slides=this.$slider.find("> li");this.totalSlides=this.$slides.length;this.cssTransitions=j.cssTransitions();this.cssTransforms3d=j.cssTransforms3d();this.currentPlace=this.settings.startSlide;this.$currentSlide=o(this.$slides[this.currentPlace]);this.inProgress=false;this.$sliderWrap=this.$slider.wrap('<div class="rs-wrap" />').parent();this.$sliderBG=this.$slider.wrap('<div class="rs-slide-bg" />').parent();this.settings.slider=this;this.init()}k.prototype={init:function(){var a=this;this.settings.onInit();this.captions();if(this.settings.controls==="arrows"){this.setArrows()}if(this.settings.keyNav){this.setKeys()}for(var c=0;c<this.totalSlides;c++){o(this.$slides[c]).attr("class","rs-slide-"+c)}if(this.settings.autoPlay){this.setAutoPlay();this.$slider.on("mouseenter",function(){clearTimeout(a.cycling)});this.$slider.on("mouseleave",function(){a.setAutoPlay()})}var d=o(this.$slides).find("img:eq(0)").addClass("rs-slide-image"),b=[];o(d).imagesLoaded(function(){for(var e=0;e<a.totalSlides;e++){b.push(o(d[e]).clone().css({position:"absolute",visibility:"hidden",display:"block"}).appendTo(a.$slider))}setTimeout(function(){a.setup(b)},0)})},setup:function(b){var e=this,a=parseInt(this.$sliderBG.css("padding-left").replace("px",""))+parseInt(this.$sliderBG.css("padding-right").replace("px","")),c=[];var d=b.length;while(d--){c.push(o(b[d]).width());if(e.settings.controls!=="thumbs"){o(b[d]).remove()}}this.$sliderWrap.css("width",Math.floor.apply(Math,c)+a);if(this.settings.controls==="thumbs"){this.setThumbs(b)}this.$currentSlide.css({opacity:1,"z-index":2});this.$sliderBG.prefixes({transform:"translateZ(0)"})},setArrows:function(){var a=this;this.$sliderWrap.append(this.settings.arrowTemplate);o(".rs-next",this.$sliderWrap).on("click",function(b){b.preventDefault();a.next()});o(".rs-prev",this.$sliderWrap).on("click",function(b){b.preventDefault();a.prev()})},next:function(){if(this.currentPlace===this.totalSlides-1){this.transition(0,true)}else{this.transition(this.currentPlace+1,true)}},prev:function(){if(this.currentPlace==0){this.transition(this.totalSlides-1,false)}else{this.transition(this.currentPlace-1,false)}},setKeys:function(){var a=this;o(l).on("keydown",function(b){if(b.keyCode===39){a.next()}else{if(b.keyCode===37){a.prev()}}})},setAutoPlay:function(){var a=this;this.cycling=setTimeout(function(){a.next()},this.settings.delay)},setThumbs:function(b){var e=this,c=(100-((this.totalSlides-1)*this.settings.thumbMargin))/this.totalSlides+"%";this.$thumbWrap=o('<div class="rs-thumb-wrap" />').appendTo(this.$sliderWrap);for(var d=0;d<this.totalSlides;d++){var a=o('<a class="rs-slide-link-'+d+'" />').css({width:c,marginLeft:this.settings.thumbMargin+"%"}).attr({href:"#"});o(b[d]).removeAttr("style").appendTo(this.$thumbWrap).wrap(a)}this.$thumbWrap.children().last().css("margin-right",-10);o(this.$thumbWrap.find("a")[this.settings.startSlide]).addClass("active");this.$thumbWrap.on("click","a",function(f){f.preventDefault();var g=parseInt(o(this).attr("class").split("-")[3]);e.transition(g)})},captions:function(){var a=this,b=this.$slides.find(".rs-caption");b.css({width:a.settings.captionWidth+"%",opacity:0});this.$currentSlide.find(".rs-caption").css({opacity:1});b.each(function(){o(this).prefixes({transition:"opacity "+a.settings.transitionDuration+"ms ease-in-out",transform:"translateZ(0)"})})},transition:function(a,b){if(!this.inProgress){if(a!==this.currentPlace){if(b===q){b=a>this.currentPlace?true:false}this.$nextSlide=o(this.$slides[a]);this.currentPlace=a;this.settings.onChange();new n(this,this.settings.transition,b);if(this.settings.controls==="thumbs"){this.$thumbWrap.find("a").removeClass("active");o(this.$thumbWrap.find("a")[a]).addClass("active")}}}}};function n(b,a,c){this.RS=b;this.RS.inProgress=true;this.forward=c;this.transition=a;this.fallback3d=this.RS.settings.fallback3d;this.init()}n.prototype={fallback:"fade",anims:["cubeH","cubeV","fade","sliceH","sliceV","slideH","slideV","scale","blockScale","kaleidoscope","fan","blindH","blindV"],init:function(){this[this.transition]()},before:function(a){var b=this;this.RS.$currentSlide.css("z-index",2);this.RS.$nextSlide.css({opacity:1,"z-index":1});if(this.RS.cssTransitions){this.RS.$currentSlide.find(".rs-caption").css("opacity",0);this.RS.$nextSlide.find(".rs-caption").css("opacity",1)}else{this.RS.$currentSlide.find(".rs-caption").animate({opacity:0},b.RS.settings.transitionDuration);this.RS.$nextSlide.find(".rs-caption").animate({opacity:1},b.RS.settings.transitionDuration)}if(typeof this.setup==="function"){var c=this.setup();setTimeout(function(){a(c)},40)}else{this.execute()}if(this.RS.cssTransitions){o(this.listenTo).one("webkitTransitionEnd transitionend otransitionend msTransitionend MSTransitionEnd",function(){b.after()})}},after:function(){this.RS.$slider.removeAttr("style");this.RS.$currentSlide.removeAttr("style").css("opacity",0);this.RS.$nextSlide.removeAttr("style").css({"z-index":2,opacity:1});if(typeof this.reset==="function"){this.reset()}if(this.RS.settings.autoPlay){clearTimeout(this.RS.cycling);this.RS.setAutoPlay()}this.RS.$currentSlide=this.RS.$nextSlide;this.RS.inProgress=false;this.RS.settings.afterChange()},fade:function(){var a=this;if(this.RS.cssTransitions){this.setup=function(){a.listenTo=a.RS.$currentSlide;a.RS.$currentSlide.prefixes({transition:"opacity "+a.RS.settings.transitionDuration+"ms ease-in-out"})};this.execute=function(){a.RS.$currentSlide.css({opacity:0})}}else{this.execute=function(){a.RS.$currentSlide.animate({opacity:0},a.RS.settings.transitionDuration,function(){a.after()})}}this.before(function(){a.execute()})},cube:function(e,c,d,g,h,a,b){if(!this.RS.cssTransitions||!this.RS.cssTransforms3d){return this[this["fallback3d"]]()}var f=this;this.setup=function(){f.listenTo=f.RS.$slider;this.RS.$sliderBG.prefixes({perspective:1000});var i={transform:"translateZ("+e+"px)","backface-visibility":"hidden"};f.RS.$currentSlide.prefixes(i);f.RS.$nextSlide.prefixes(i);f.RS.$slider.prefixes({transition:"none","transform-style":"preserve-3d",transform:"translateZ(-"+e+"px)"});f.RS.$nextSlide.css({opacity:1}).prefixes({transform:"translateZ(0px) translateY("+d+"px) translateX("+c+"px) rotateY("+h+"deg) rotateX("+g+"deg)"})};this.execute=function(){var t=[];for(var i=0;i<j.browserVendors.length;i++){t[j.browserVendors[i]+"transition"]=j.browserVendors[i]+"transform "+f.RS.settings.transitionDuration+"ms ease-in-out"}f.RS.$slider.prefixes(t);f.RS.$slider.prefixes({transform:"translateZ(-"+e+"px) rotateX("+a+"deg) rotateY("+b+"deg)"})};this.before(function(){f.execute()})},cubeH:function(){var a=o(this.RS.$slides).width()/2;if(this.forward){this.cube(a,a,0,0,90,0,-90)}else{this.cube(a,-a,0,0,-90,0,90)}},cubeV:function(){var a=o(this.RS.$slides).height()/2;if(this.forward){this.cube(a,0,-a,90,0,-90,0)}else{this.cube(a,0,a,-90,0,90,0)}},grid:function(h,a,b,c,d,g,e){if(!this.RS.cssTransitions){return this[this["fallback"]]()}var f=this;this.setup=function(){var N=(f.RS.settings.transitionDuration)/(h+a);function P(z,s,v,y,A,u,t,w,B){var x=(w+B)*N;return o('<div class="rs-gridlet" />').css({width:z,height:s,top:v,left:y,"background-image":"url("+A+")","background-position":"-"+y+"px -"+v+"px","background-size":u+"px "+t+"px"}).prefixes({transition:"all "+f.RS.settings.transitionDuration+"ms ease-in-out "+x+"ms",transform:"none"})}f.$img=f.RS.$currentSlide.find("img.rs-slide-image");f.$grid=o("<div />").addClass("rs-grid");f.RS.$currentSlide.prepend(f.$grid);var L=f.$img.width(),O=f.$img.height(),W=f.$img.attr("src"),K=Math.floor(L/h),T=Math.floor(O/a),Z=L-(h*K),i=Math.ceil(Z/h),X=O-(a*T),V=Math.ceil(X/a),M=0;c=c==="auto"?L:c;c=c==="min-auto"?-L:c;d=d==="auto"?O:d;d=d==="min-auto"?-O:d;for(var Q=0;Q<h;Q++){var R=0,aa=K;if(Z>0){var ab=Z>=i?i:Z;aa+=ab;Z-=ab}for(var S=0;S<a;S++){var U=T,Y=X;if(Y>0){ab=Y>=V?V:X;U+=ab;Y-=ab}f.$grid.append(P(aa,U,R,M,W,L,O,Q,S));R+=U}M+=aa}f.listenTo=f.$grid.children().last();f.$grid.show();f.$img.css("opacity",0);f.$grid.children().first().addClass("rs-top-left");f.$grid.children().last().addClass("rs-bottom-right");f.$grid.children().eq(a-1).addClass("rs-bottom-left");f.$grid.children().eq(-a).addClass("rs-top-right")};this.execute=function(){f.$grid.children().css("opacity",e).prefixes({transform:"rotate("+b+"deg) translateX("+c+"px) translateY("+d+"px) scale("+g+")"})};this.before(function(){f.execute()});this.reset=function(){f.$img.css("opacity",1);f.$grid.remove()}},sliceH:function(){this.grid(1,8,0,"min-auto",0,1,0)},sliceV:function(){this.grid(10,1,0,0,"auto",1,0)},slideV:function(){this.grid(1,1,0,0,"auto",1,1)},slideH:function(){this.grid(1,1,0,"min-auto",0,1,1)},scale:function(){this.grid(1,1,0,0,0,1.5,0)},blockScale:function(){this.grid(8,6,0,0,0,0.6,0)},kaleidoscope:function(){this.grid(10,8,0,0,0,1,0)},fan:function(){this.grid(1,10,45,100,0,1,0)},blindV:function(){this.grid(1,8,0,0,0,0.7,0)},blindH:function(){this.grid(10,1,0,0,0,0.7,0)},random:function(){this[this.anims[Math.floor(Math.random()*this.anims.length)]]()}};var j={browserVendors:["","-webkit-","-moz-","-ms-","-o-","-khtml-"],domPrefixes:["","Webkit","Moz","ms","O","Khtml"],testDom:function(a){var b=this.domPrefixes.length;while(b--){if(l.body.style[this.domPrefixes[b]+a]!==q){return true}}return false},cssTransitions:function(){if(m.Modernizr&&Modernizr.csstransitions!==q){return Modernizr.csstransitions}return this.testDom("Transition")},cssTransforms3d:function(){if(m.Modernizr&&Modernizr.csstransforms3d!==q){return Modernizr.csstransforms3d}if(l.body.style.perspectiveProperty!==q){return true}return this.testDom("Perspective")}};o.fn.prefixes=function(b){var d=[];for(var a in b){if(b.hasOwnProperty(a)){var c=j.browserVendors.length;while(c--){d[j.browserVendors[c]+a]=b[a]}}}this.css(d);return this};var r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";o.fn.imagesLoaded=function(b){var e=this,t=o.isFunction(o.Deferred)?o.Deferred():0,a=o.isFunction(t.notify),h=e.find("img").add(e.filter("img")),g=[],c=[],f=[];function d(){var v=o(c),s=o(f);if(t){if(f.length){t.reject(h,v,s)}else{t.resolve(h)}}if(o.isFunction(b)){b.call(e,h,v,s)}}function i(v,s){if(v.src===r||o.inArray(v,g)!==-1){return}g.push(v);if(s){f.push(v)}else{c.push(v)}o.data(v,"imagesLoaded",{isBroken:s,src:v.src});if(a){t.notifyWith(o(v),[s,h,o(c),o(f)])}if(h.length===g.length){setTimeout(d);h.unbind(".imagesLoaded")}}if(!h.length){d()}else{h.bind("load.imagesLoaded error.imagesLoaded",function(s){i(s.target,s.type==="error")}).each(function(z,x){var s=x.src;var y=o.data(x,"imagesLoaded");if(y&&y.src===s){i(x,y.isBroken);return}if(x.complete&&x.naturalWidth!==q){i(x,x.naturalWidth===0||x.naturalHeight===0);return}if(x.readyState||x.complete){x.src=r;x.src=s}})}return t?t.promise(e):e};o.fn.refineSlide=function(a){return this.each(function(){if(!o.data(this,"refineSlide")){o.data(this,"refineSlide",new k(this,a))}})}})(jQuery,window,document);